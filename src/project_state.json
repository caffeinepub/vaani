{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "New project",
  "architectural_notes": [
    "AuthProvider must wrap the entire application (RouterProvider, Header, CreatorZoneTab, and all routes) to support useAuth() calls.",
    "AuthProvider must be placed above InternetIdentityProvider in the provider tree.",
    "Do not modify compiled files; apply fixes in source only (no try/catch or conditional useAuth workarounds)."
  ],
  "known_issues": [
    "AuthProvider is not wrapping the router tree; components calling useAuth() (CreatorZoneAuthControls, CreatorZoneTab) can cause a blank screen and break login/logout."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-refactor-the-auth-provider-setup-so-a-real-authprovider-wraps-the-entire-app-router-tree-and-the-authprovider-component-is-above-internetidentityprovider-in-the-rendered-hierarchy-while-still-allowing-authcontext-to-use-internet-identity-state-internally-e-g-by-making-authprovider-an-outer-wrapper-that-renders-internetidentityprovider-and-an-internal-provider-that-uses-useinternetidentity",
      "title": "Refactor the auth provider setup so a real `AuthProvider` wraps the entire app/router tree, and the `AuthProvider` component is above `InternetIdentityProvider` in the rendered hierarchy while still allowing AuthContext to use Internet Identity state internally (e.g., by making `AuthProvider` an outer wrapper that renders `InternetIdentityProvider` and an internal provider that uses `useInternetIdentity`).",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-preserve-and-validate-existing-auth-behaviors-after-provider-hierarchy-changes-login-logout-admin-redirect-to-studio-query-cache-clearing-on-logout-and-idle-timeout-auto-logout-banner-behavior-in-creator-zone",
      "title": "Preserve and validate existing auth behaviors after provider hierarchy changes: login, logout, admin redirect to `/studio`, query-cache clearing on logout, and idle timeout auto-logout banner behavior in Creator Zone.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-do-not-modify-compiled-built-artifacts-apply-the-fix-only-in-source-typescript-tsx-files-e-g-under-frontend-src",
      "title": "Do not modify compiled/built artifacts; apply the fix only in source TypeScript/TSX files (e.g., under `frontend/src/**`).",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-redeploy-after-applying-the-fix-and-verify-using-the-checks-described-in-frontend-deployment-verification-md-initial-load-login-logout-navigation-idle-timeout-and-console-error-free-operation",
      "title": "Redeploy after applying the fix and verify using the checks described in `frontend/DEPLOYMENT_VERIFICATION.md` (initial load, login, logout, navigation, idle timeout, and console error-free operation).",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-2",
      "summary": "Update the application root composition (in `frontend/src/main.tsx` or the root entry component it renders) so that `RouterProvider`, `Header`, `CreatorZoneTab`, and all routes are rendered inside the `AuthProvider` boundary (ensuring the router tree is fully wrapped).",
      "reqIds": [
        "REQ-2"
      ],
      "status": "pending"
    }
  ],
  "projectName": "Fix AuthProvider placement so useAuth is always within provider (no blank screen)",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}